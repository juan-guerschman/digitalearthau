


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction to DEA Landsat surface reflectance &mdash; Digital Earth Australia 1.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/dea-favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://unpkg.com/font-awesome@4.5.0/css/font-awesome.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Introduction to Landsat pixel quality (PQ25)" href="Introduction_to_LandsatPQ.html" />
    <link rel="prev" title="DEA Datasets" href="README.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/dea-logo-inline.svg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/changelog.html">DEA NCI Environment Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Connect</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../connect/account.html">NCI Account Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/install.html">Installation and Software Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/nci_basics.html">Command Line Usage (Advanced)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/jupyter.html">Jupyter Notebooks Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/other_modules.html">Other Modules</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_Getting_started/README.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="README.html">DEA Datasets</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Introduction to DEA Landsat surface reflectance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#About-Landsat">About Landsat</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Basic-details-about-Landsat-5-to-9-[3][4][5][6][7]">Basic details about Landsat 5 to 9 [3][4][5][6][7]</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Digital-Earth-Australia's-Landsat-archive">Digital Earth Australia’s Landsat archive</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Landsat-surface-reflectance-products">Landsat surface reflectance products</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Nodata-value">Nodata value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Available-bands">Available bands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Landsat-7-Scan-Line-Corrector-failure">Landsat 7 Scan Line Corrector failure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Retrieving-Landsat-data">Retrieving Landsat data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Import-modules">Import modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Available-Landsat-products">Available Landsat products</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Specify-a-query-with-coordinates-and-date-range">Specify a <em>query</em> with coordinates and date range</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Load-Landsat-data">Load Landsat data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Remove-nodata-values">Remove nodata values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Plotting-Landsat-data">Plotting Landsat data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Plot-single-Landsat-bands">Plot single Landsat bands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Creating-a-'true-colour'-image-using-three-bands">Creating a ‘true colour’ image using three bands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Creating-a-'false-colour'-image-using-three-bands">Creating a ‘false colour’ image using three bands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Computing-band-indices">Computing band indices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Plotting-a-single-data-variable-or-band">Plotting a single data variable or band</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Cloud-masking-with-Landsat-pixel-quality-(PQ25)">Cloud masking with Landsat pixel quality (PQ25)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#References">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Introduction_to_LandsatPQ.html">Introduction to Landsat pixel quality (PQ25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Introduction_to_Fractional_Cover.html">Introduction to Fractional Cover Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Introduction_to_HLTC.html">Getting started with High-Low Tide Composites (HLTC_25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Introduction_to_ITEM.html">Getting started with the Intertidal Extents Relative Model and ITEM Confidence (ITEM v2.0)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../03_Integrating_external_data/README.html">Integrating External Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_Index_calculation/README.html">Index Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_Temporal_analysis/README.html">Temporal Analyses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_Composite_generation/README.html">Composite Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07_Image_classification/README.html">Image Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08_Outputting_data/README.html">Outputting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_Workflows/README.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_Scripts/README.html">Scripts</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data/data.html">Surface Reflectance</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../internal/new_product.html">Creating a New Product</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/git_best_practice.html">Git Best Practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/release.html">DEA Release Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/modules.html">DEA Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/collection_management.html">Collection Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/requirements_met.html">DEA Code Functionality Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Indexes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Tags Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Digital Earth Australia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="README.html">DEA Datasets</a> &raquo;</li>
        
      <li>Introduction to DEA Landsat surface reflectance</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/notebooks/02_DEA_datasets/Introduction_to_Landsat.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="Introduction-to-DEA-Landsat-surface-reflectance">
<h1>Introduction to DEA Landsat surface reflectance<a class="headerlink" href="#Introduction-to-DEA-Landsat-surface-reflectance" title="Permalink to this headline">¶</a></h1>
<p><strong>Background:</strong> Surface reflectance products from three Landsat
satellites (<strong>Landsat 5, 7 and 8</strong>) are available for access through
Geoscience Australia’s Digital Earth Australia (DEA). This document
includes a short introduction to the Landsat program, and describes the
surface reflectance product suite (<strong>NBAR and NBAR-T</strong>) available
through DEA. The code snippets in this doc will retrieve, modify and
plot the data for <code class="docutils literal notranslate"><span class="pre">ls*_nbar_albers</span></code> and <code class="docutils literal notranslate"><span class="pre">ls*_nbart_albers</span></code>, where
<code class="docutils literal notranslate"><span class="pre">*</span></code> is 5, 7 or 8 denote the satellite.</p>
<p><strong>What does this document do?</strong></p>
<ul class="simple">
<li>Show how to use datacube to retrieve Landsat data for various
temporal and spatial extents</li>
<li>Plot individual Landsat bands</li>
<li>Plot multiple Landsat bands as a true colour image</li>
<li>Plot multiple Landsat bands as a false colour image</li>
<li>Demonstrate how to compute and plot simple remote sensing band
indices</li>
</ul>
<p><strong>Requirements</strong></p>
<p>You need to run the following commands from the command line prior to
launching jupyter notebooks from the same terminal so that the required
libraries and paths are set:</p>
<p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">use</span> <span class="pre">/g/data/v10/public/modules/modulefiles</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">dea</span></code></p>
<p>If you find an error or bug in this notebook, please either create an
‘Issue’ in the Github repository, or fix it yourself and create a ‘Pull’
request to contribute the updated notebook back into the repository (See
the repository
<a class="reference external" href="https://github.com/GeoscienceAustralia/dea-notebooks/blob/master/README.rst">README</a>
for instructions on creating a Pull request).</p>
<p><strong>Date</strong>: August 2018</p>
<p><strong>Authors</strong>: Robbi Bishop-Taylor, Arapaut Sivaprasad, Claire Krause, Bex
Dunn</p>
<p>Tags: <span class="target" id="index-0"></span>Landsat 5, <span class="target" id="index-1"></span>Landsat 7, <span class="target" id="index-2"></span>Landsat 8, <span class="target" id="index-3"></span>products, <span class="target" id="index-4"></span>dc.list_products, <span class="target" id="index-5"></span>dc.load, <span class="target" id="index-6"></span>query, <span class="target" id="index-7"></span>beginner, <span class="target" id="index-8"></span>plot, <span class="target" id="index-9"></span>image, <span class="target" id="index-10"></span>Scan Line Corrector, <span class="target" id="index-11"></span>Sensor bands, <span class="target" id="index-12"></span>Indices, <span class="target" id="index-13"></span>NDVI, <span class="target" id="index-14"></span>NDWI</p>
<div class="section" id="About-Landsat">
<h2>About Landsat<a class="headerlink" href="#About-Landsat" title="Permalink to this headline">¶</a></h2>
<p>“Landsat represents the world’s longest continuously acquired collection
of space-based moderate-resolution land remote sensing data. Four
decades of imagery provides a unique resource for those who work in
agriculture, geology, forestry, regional planning, education, mapping,
and global change research. Landsat images are also invaluable for
emergency response and disaster relief.” [<a class="reference external" href="#References">1</a>]</p>
<p>“In the mid-1960s an ambitious effort to develop and launch the first
civilian Earth observation satellite was started. The goal was achieved
on July 23, 1972, with the launch of the Earth Resources Technology
Satellite (ERTS-1), which was later renamed Landsat 1. The launches of
Landsat 2, Landsat 3, and Landsat 4 followed in 1975, 1978, and 1982,
respectively. When Landsat 5 was launched in 1984, no one could have
predicted that the satellite would continue to deliver high quality,
global data of Earth’s land surfaces for 28 years and 10 months until
its retirement in June, 2013. Landsat 6, however, failed to achieve
orbit in 1993. Landsat 7 was successfully launched in 1999 and, along
with Landsat 8 launched in 2013, continues to provide daily global data.
Landsat 9 is planned to be launched in late 2020.”
[<a class="reference external" href="#References">2</a>]</p>
<div class="figure" id="id1">
<img alt="Fig 1. Time-line of the working lives of Landsats since 1972" src="../../_images/TimelineOnlyForWebRGB.jpg" />
<p class="caption"><span class="caption-text">Fig 1. Time-line of the working lives of Landsats since 1972</span></p>
</div>
<div class="section" id="Basic-details-about-Landsat-5-to-9-[3][4][5][6][7]">
<h3>Basic details about Landsat 5 to 9 [<a class="reference external" href="#References">3</a>][<a class="reference external" href="#References">4</a>][<a class="reference external" href="#References">5</a>][<a class="reference external" href="#References">6</a>][<a class="reference external" href="#References">7</a>]<a class="headerlink" href="#Basic-details-about-Landsat-5-to-9-[3][4][5][6][7]" title="Permalink to this headline">¶</a></h3>
<div class="figure" id="id2">
<img alt="Fig 2. Basic details about the Landsats" src="../../_images/landsats.jpg" />
<p class="caption"><span class="caption-text">Fig 2. Basic details about the Landsats</span></p>
</div>
</div>
</div>
<div class="section" id="Digital-Earth-Australia's-Landsat-archive">
<h2>Digital Earth Australia’s Landsat archive<a class="headerlink" href="#Digital-Earth-Australia's-Landsat-archive" title="Permalink to this headline">¶</a></h2>
<p>GA has acquired Landsat imagery over Australia since 1979, including TM,
ETM+ and OLI imagery. While this data has been used extensively for
numerous land and coastal mapping studies, its utility for accurate
monitoring of environmental resources has been limited by the processing
methods that have been traditionally used to correct for inherent
geometric and radiometric distortions in EO imagery. To improve access
to Australia’s archive of Landsat TM/ETM+/OLI data, GA has
collaboratively developed an integrated approach to image data
correction that incorporates normalising models to account for
atmospheric effects, BRDF and topographic shading.</p>
<p>The approach has been applied to Landsat TM/ETM+ and OLI imagery to
create two surface reflectance products: <strong>NBAR</strong> and <strong>NBAR-T</strong>.
[<a class="reference external" href="#References">9</a>]</p>
</div>
<div class="section" id="Landsat-surface-reflectance-products">
<h2>Landsat surface reflectance products<a class="headerlink" href="#Landsat-surface-reflectance-products" title="Permalink to this headline">¶</a></h2>
<p>The NBAR and NBAR-T surface reflectance product suite provides
standardised optical surface reflectance datasets using robust physical
models to correct for variations in image radiance values due to
atmospheric properties, and sun and sensor geometry. The resulting stack
of surface reflectance grids are consistent over space and time which is
instrumental in identifying and quantifying environmental change.
Surface reflectance is based on radiance data from the Landsat-5 TM,
Landsat-7 ETM+ and Landsat-8 OLI/TIRS sensors. [<a class="reference external" href="#References">9</a>]</p>
<p><strong>NBAR</strong></p>
<p>NBAR stands for Nadir-corrected BRDF Adjusted Reflectance, where BRDF
stands for Bidirectional Reflectance Distribution Function. The approach
involves atmospheric correction to compute surface-leaving radiance, and
bi-directional reflectance modelling to remove the effects of topography
and angular variation in reflectance.</p>
<ul class="simple">
<li>The standardised NBAR product delivers calibrated optical surface
reflectance data across land and coastal fringes. NBAR is a medium
resolution (~25 m) grid based on the Landsat TM/ETM+/OLI archive and
presents surface reflectance data in <strong>25 square metre grid cells</strong>
in the <strong>Australian Albers Equal Area (EPSG:3577)</strong> projection
system.</li>
<li>Radiance measurements from Earth Observation (EO) sensors do not
directly quantify the surface reflectance of the Earth. Such
measurements are modified by variations in atmospheric properties,
sun position, sensor view angle, surface slope and surface aspect. To
obtain consistent and comparable measures of Earth surface
reflectance from EO, these variations need to be reduced or removed
from the radiance measurements. This is especially important when
comparing imagery acquired in different seasons and geographic
regions.</li>
<li>NBAR surface reflectance is created using a physics-based, coupled
BRDF and atmospheric correction model that can be applied to both
flat and inclined surfaces. The resulting surface reflectance values
are comparable both within individual images and between images
acquired at different times and/or with different sensors.
[<a class="reference external" href="#References">9</a>]</li>
</ul>
<p><strong>NBAR-T</strong></p>
<p>Surface reflectance NBAR-T includes a terrain illumination reflectance
correction and has the same features of NBAR, along with some additional
features.</p>
<ul class="simple">
<li>The surface reflectance product is created using a physics-based
coupled BRDF and atmospheric correction model that can be applied to
both flat and inclined surfaces. The resulting surface reflectance
values are comparable both within individual images and between
images acquired at different times and/or with different sensors.</li>
<li>Terrain affects optical satellite images through both irradiance and
bidirectional reflectance distribution function (BRDF) effects.
Slopes facing the sun receive enhanced solar irradiance and appear
brighter compared to those facing away from the sun.</li>
<li>For anisotropic surfaces, the radiance received at the satellite
sensor from a sloping surface is also affected by surface BRDF which
varies with combinations of surface landcover types, sun, and
satellite geometry (sun and sensor view, and their relative azimuth
angle) as well as topographic geometry (primarily slope and aspect
angles). Consequently, to obtain comparable surface reflectance from
satellite images covering mountainous areas, it is necessary to
process the images to reduce or remove the topographic effect so that
the images can be used for different purposes on the same spectral
base.</li>
<li>A Digital Surface Model (DSM) resolution appropriate to the scale of
the resolution of satellite image is needed for the best results. 1
second SRTM DSM is used for NBAR-T processing.
[<a class="reference external" href="#References">9</a>]</li>
</ul>
<div class="section" id="Nodata-value">
<h3>Nodata value<a class="headerlink" href="#Nodata-value" title="Permalink to this headline">¶</a></h3>
<p>Both NBAR and NBAR-T data contains <strong>nodata pixels</strong>, represented as
<code class="docutils literal notranslate"><span class="pre">-999</span></code> values. For NBAR these values can represent pixels outside the
observed area (e.g. along the edges of Landsat satellite paths), while
in NBAR-T <code class="docutils literal notranslate"><span class="pre">-999</span></code> values can also indicate areas of deep terrain
shadow. These values should be converted to a <code class="docutils literal notranslate"><span class="pre">NaN</span></code> value before using
this data to avoid treating it as a valid value. [<a class="reference external" href="#References">9</a>]</p>
</div>
<div class="section" id="Available-bands">
<h3>Available bands<a class="headerlink" href="#Available-bands" title="Permalink to this headline">¶</a></h3>
<p>The sensors on the Landsats are different and collect reflected radiance
in various spectral wavelengths. These are called bands. Details about
the bands for satellites 5, 7 and 8 can be found at
[<a class="reference external" href="#References">3</a>], [<a class="reference external" href="#References">5</a>] and
[<a class="reference external" href="#References">6</a>], respectively. The following bands are included
in the DEA archive: band names to be used in code, when retrieving the
data, are given in brackets.</p>
<ul class="simple">
<li><strong>Landsat 5 and 7:</strong><ul>
<li>Excludes Landsat 5 Thematic Mapper (TM) thermal band and
Multispectral Scanner (MSS) bands, and Landsat 7 Enhanced Thematic
Mapper Plus (ETM+) thermal band and panchromatic band</li>
<li>Includes the following Landsat 5 TM and Landsat 7 ETM+ bands:<ul>
<li>Band 1: blue (<code class="docutils literal notranslate"><span class="pre">blue</span></code>)</li>
<li>Band 2: green (<code class="docutils literal notranslate"><span class="pre">green</span></code>)</li>
<li>Band 3: red (<code class="docutils literal notranslate"><span class="pre">red</span></code>)</li>
<li>Band 4: near-infrared (<code class="docutils literal notranslate"><span class="pre">nir</span></code>)</li>
<li>Band 5: shortwave infrared 1 (<code class="docutils literal notranslate"><span class="pre">swir1</span></code>)</li>
<li>Band 7: shortwave infrared 2 (<code class="docutils literal notranslate"><span class="pre">swir2</span></code>)</li>
</ul>
</li>
</ul>
</li>
<li><strong>Landsat 8:</strong><ul>
<li>Excludes the Operational Land Imager (OLI) panchromatic or cirrus
bands, and Thermal Infrared Sensor (TIRS) bands</li>
<li>Includes the following Operational Land Imager (OLI) bands:<ul>
<li>Band 1: coastal aerosol (<code class="docutils literal notranslate"><span class="pre">coastal_aerosol</span></code>)</li>
<li>Band 2: blue (<code class="docutils literal notranslate"><span class="pre">blue</span></code>)</li>
<li>Band 3: green (<code class="docutils literal notranslate"><span class="pre">green</span></code>)</li>
<li>Band 4: red (<code class="docutils literal notranslate"><span class="pre">red</span></code>)</li>
<li>Band 5: near-infrared (<code class="docutils literal notranslate"><span class="pre">nir</span></code>)</li>
<li>Band 6: shortwave infrared 1 (<code class="docutils literal notranslate"><span class="pre">swir1</span></code>)</li>
<li>Band 7: shortwave infrared 2 (<code class="docutils literal notranslate"><span class="pre">swir2</span></code>)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="Landsat-7-Scan-Line-Corrector-failure">
<h3>Landsat 7 Scan Line Corrector failure<a class="headerlink" href="#Landsat-7-Scan-Line-Corrector-failure" title="Permalink to this headline">¶</a></h3>
<p>“The Scan Line Corrector (SLC) is an electro-optical mechanism composed
of two parallel mirrors set at an angle on a shaft. The SLC is
positioned behind the primary optics and compensates for the along-track
motion of the spacecraft occurring during an active SMA cross-track
scan. As a result, a rectilinear scan pattern is produced using the SLC
instead of the zigzag pattern that would be produced without it. The SLC
failed for Landsat 7 on May 31, 2003. Without an operating SLC, the ETM+
line of sight now traces a zig-zag pattern along the satellite ground
track (see the figure above) resulting in wedge shaped scan-to-scan gaps
(and alternating overlap areas) which increase in magnitude away from
nadir. Despite the SLC failure, Landsat 7 ETM+ is still capable of
acquiring useful image data with the SLC turned off (SLC-off),
particularly within the central portion of any given scene.”
[<a class="reference external" href="#References">8</a>]</p>
<p>The top panel in the figure below shows how Landat 7 imagery appears
prior to the May 31 2003 SLC failure (i.e. Landsat 7 SLC-on). The bottom
panel shows the same area after the SLC failed (i.e. Landsat 7 SLC-off),
with obvious diagonal striping that covers approximately 22% of the
scene. This striping will be present in all post-May 31 2003
<code class="docutils literal notranslate"><span class="pre">ls7_nbar_albers</span></code> and <code class="docutils literal notranslate"><span class="pre">ls7_nbart_albers</span></code> data in the DEA archive.
For certain applications, it may be best to completely exclude post
post-May 31 2003 imagery from analyses.</p>
<div class="figure" id="id3">
<img alt="Figure 3. Scan line corrected image." src="../../_images/SLC_comparison.jpg" />
<p class="caption"><span class="caption-text">Figure 3. Scan line corrected image.</span></p>
</div>
</div>
</div>
<div class="section" id="Retrieving-Landsat-data">
<h2>Retrieving Landsat data<a class="headerlink" href="#Retrieving-Landsat-data" title="Permalink to this headline">¶</a></h2>
<p>The following code demonstrates how to import Landsat data using DEA,
plot the data, and perform simple analyses (i.e. generating remote
sensing band indices).</p>
<div class="section" id="Import-modules">
<h3>Import modules<a class="headerlink" href="#Import-modules" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># %matplotlib inline</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">datacube</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">datacube.storage</span> <span class="k">import</span> <span class="n">masking</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="Available-Landsat-products">
<h3>Available Landsat products<a class="headerlink" href="#Available-Landsat-products" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">list_products</span></code> method in the Datacube class displays the names
and details of all available products. For example, <code class="docutils literal notranslate"><span class="pre">ls7_nbar_albers</span></code>
provides NBAR surface reflectance data generated using Landsat 7
imagery:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Connect to a datacube</span>
<span class="n">dc</span> <span class="o">=</span> <span class="n">datacube</span><span class="o">.</span><span class="n">Datacube</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="s1">&#39;Intro to Landsat&#39;</span><span class="p">)</span>

<span class="c1"># List metadata for all Landsat NBAR and NBART products available in DEA</span>
<span class="n">dc_products</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">list_products</span><span class="p">()</span>
<span class="n">display_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;product_type&#39;</span><span class="p">,</span> <span class="s1">&#39;crs&#39;</span><span class="p">,</span> <span class="s1">&#39;resolution&#39;</span><span class="p">,</span> <span class="s1">&#39;spatial_dimensions&#39;</span><span class="p">]</span>
<span class="n">dc_products</span><span class="p">[</span><span class="n">dc_products</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;nbar_albers|nbart_albers&quot;</span><span class="p">)][</span><span class="n">display_columns</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>description</th>
      <th>product_type</th>
      <th>crs</th>
      <th>resolution</th>
      <th>spatial_dimensions</th>
    </tr>
    <tr>
      <th>name</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ls5_nbar_albers</th>
      <td>Landsat 5 Surface Reflectance NBAR 25 metre, 1...</td>
      <td>nbar</td>
      <td>EPSG:3577</td>
      <td>[-25, 25]</td>
      <td>(y, x)</td>
    </tr>
    <tr>
      <th>ls5_nbart_albers</th>
      <td>Landsat 5 Surface Reflectance NBART 25 metre, ...</td>
      <td>nbart</td>
      <td>EPSG:3577</td>
      <td>[-25, 25]</td>
      <td>(y, x)</td>
    </tr>
    <tr>
      <th>ls7_nbar_albers</th>
      <td>Landsat 7 Surface Reflectance NBAR 25 metre, 1...</td>
      <td>nbar</td>
      <td>EPSG:3577</td>
      <td>[-25, 25]</td>
      <td>(y, x)</td>
    </tr>
    <tr>
      <th>ls7_nbart_albers</th>
      <td>Landsat 7 Surface Reflectance NBART 25 metre, ...</td>
      <td>nbart</td>
      <td>EPSG:3577</td>
      <td>[-25, 25]</td>
      <td>(y, x)</td>
    </tr>
    <tr>
      <th>ls8_nbar_albers</th>
      <td>Landsat 8 Surface Reflectance NBAR 25 metre, 1...</td>
      <td>nbar</td>
      <td>EPSG:3577</td>
      <td>[-25, 25]</td>
      <td>(y, x)</td>
    </tr>
    <tr>
      <th>ls8_nbart_albers</th>
      <td>Landsat 8 Surface Relfectance NBART 25 metre, ...</td>
      <td>nbart</td>
      <td>EPSG:3577</td>
      <td>[-25, 25]</td>
      <td>(y, x)</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Specify-a-query-with-coordinates-and-date-range">
<h3>Specify a <em>query</em> with coordinates and date range<a class="headerlink" href="#Specify-a-query-with-coordinates-and-date-range" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>lat/lon:</strong> Latitude and longitude of the area. e.g. Canberra =
<code class="docutils literal notranslate"><span class="pre">'lat':</span> <span class="pre">(-35.25,</span> <span class="pre">-35.35),</span> <span class="pre">'lon':</span> <span class="pre">(149.05,</span> <span class="pre">149.17)</span></code></li>
<li><strong>time:</strong> Date range to fetch the scenes. The approximate time
between two scenes is 16 days. If there is a location near a swath
boundary, it may be captured in two passes and so there could be two
images within the 16 day period.<ul>
<li>You must know <a class="reference external" href="https://data.dea.gadevs.ga/ls7_nbar_scene">the date(s) for which data is
available</a> for each
satellite/product, so that the query can be specified correctly.</li>
</ul>
</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Define temporal and spatial extents to pass to `dc.load` for the data extraction:</span>
<span class="n">query</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">35.25</span><span class="p">,</span> <span class="o">-</span><span class="mf">35.35</span><span class="p">),</span>
         <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">149.05</span><span class="p">,</span> <span class="mf">149.17</span><span class="p">),</span>
         <span class="s1">&#39;time&#39;</span><span class="p">:(</span><span class="s1">&#39;2017-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-01-15&#39;</span><span class="p">)}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Load-Landsat-data">
<h3>Load Landsat data<a class="headerlink" href="#Load-Landsat-data" title="Permalink to this headline">¶</a></h3>
<p>In this example we will load NBAR-T data from the Landsat 8 satellite.
Sometimes multiple scenes are acquired by the satellite on the same day.
We want to group these together, and will use <code class="docutils literal notranslate"><span class="pre">group_by='solar_day'</span></code>
to do this. To load in the data, we use our query above to provide a
spatial and temporal extraction range.</p>
<p><code class="docutils literal notranslate"><span class="pre">dc.load</span></code> returns an <strong>xarray</strong> object, which has two core data
structures:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">DataArray</span></code> is a labeled, N-dimensional array.</li>
<li><code class="docutils literal notranslate"><span class="pre">Dataset</span></code> is a multi-dimensional, in-memory array database. It is a
dict-like container of DataArray objects aligned along any number of
shared dimensions.</li>
</ul>
<p>The available Landsat bands are listed under <code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">variables</span></code>. Surface
reflectance values for each of the Landsat bands are expressed as
<strong>16-bit integers scaled between 0 and 10000.</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Load data for the specified query extent using `dc.load`:</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">product</span><span class="o">=</span><span class="s1">&#39;ls8_nbar_albers&#39;</span><span class="p">,</span> <span class="n">group_by</span><span class="o">=</span><span class="s1">&#39;solar_day&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">query</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[4]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;xarray.Dataset&gt;
Dimensions:          (time: 2, x: 492, y: 500)
Coordinates:
  * time             (time) datetime64[ns] 2017-01-07T23:50:29 ...
  * y                (y) float64 -3.953e+06 -3.953e+06 -3.953e+06 -3.953e+06 ...
  * x                (x) float64 1.542e+06 1.542e+06 1.542e+06 1.542e+06 ...
Data variables:
    coastal_aerosol  (time, y, x) int16 1491 1547 1622 1593 1577 1570 1560 ...
    blue             (time, y, x) int16 1380 1394 1492 1479 1455 1438 1407 ...
    green            (time, y, x) int16 1469 1506 1515 1503 1501 1535 1564 ...
    red              (time, y, x) int16 1458 1509 1521 1507 1502 1514 1532 ...
    nir              (time, y, x) int16 2190 2242 2278 2283 2251 2241 2299 ...
    swir1            (time, y, x) int16 1294 1266 1257 1267 1285 1322 1337 ...
    swir2            (time, y, x) int16 1076 1064 1059 1055 1065 1096 1113 ...
Attributes:
    crs:      EPSG:3577
</pre></div>
</div>
</div>
</div>
<div class="section" id="Remove-nodata-values">
<h3>Remove nodata values<a class="headerlink" href="#Remove-nodata-values" title="Permalink to this headline">¶</a></h3>
<p>It is essential to remove <code class="docutils literal notranslate"><span class="pre">-999</span></code> nodata values prior to analysing or
plotting Landsat imagery. You can do with by setting all nodata values
to <code class="docutils literal notranslate"><span class="pre">NaN</span></code> using the <code class="docutils literal notranslate"><span class="pre">mask_invalid_data</span></code> function:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Set all nodata pixels to `NaN`:</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">masking</span><span class="o">.</span><span class="n">mask_invalid_data</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Plotting-Landsat-data">
<h2>Plotting Landsat data<a class="headerlink" href="#Plotting-Landsat-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Plot-single-Landsat-bands">
<h3>Plot single Landsat bands<a class="headerlink" href="#Plot-single-Landsat-bands" title="Permalink to this headline">¶</a></h3>
<p>Xarray objects contain built-in methods for plotting single bands. For
example, we can plot the Landsat 8 <code class="docutils literal notranslate"><span class="pre">nir</span></code> (near-infrared) band for each
timestep:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Make a plot with one column for each time-step:</span>
<span class="n">ds</span><span class="o">.</span><span class="n">nir</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;Reds&#39;</span><span class="p">);</span>  <span class="c1"># This also works: ds[&#39;nir&#39;].plot(col=&#39;time&#39;)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_02_DEA_datasets_Introduction_to_Landsat_20_0.png" src="../../_images/notebooks_02_DEA_datasets_Introduction_to_Landsat_20_0.png" />
</div>
</div>
</div>
<div class="section" id="Creating-a-'true-colour'-image-using-three-bands">
<h3>Creating a ‘true colour’ image using three bands<a class="headerlink" href="#Creating-a-'true-colour'-image-using-three-bands" title="Permalink to this headline">¶</a></h3>
<p>We can also plot combinations of multiple bands as a colour RGB image by
converting the xarray dataset to a three band data array, using
<code class="docutils literal notranslate"><span class="pre">.isel(time=1)</span></code> to pull out a single time-step to plot, then using the
<code class="docutils literal notranslate"><span class="pre">.plot.imshow</span></code> method to plot.</p>
<p>By specifying the <code class="docutils literal notranslate"><span class="pre">red</span></code>, <code class="docutils literal notranslate"><span class="pre">green</span></code> and <code class="docutils literal notranslate"><span class="pre">blue</span></code> bands, we can produce
a <a class="reference external" href="https://crisp.nus.edu.sg/~research/tutorial/opt_int.htm">‘true colour’
plot</a> that
approximates how the landscape would appear to the human eye. Note
however that below we use the <code class="docutils literal notranslate"><span class="pre">robust=True</span></code> argument to remove extreme
values and result in a colour-enhanced image:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds</span><span class="p">[[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">robust</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[7]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x7feac2f62a58&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_02_DEA_datasets_Introduction_to_Landsat_22_1.png" src="../../_images/notebooks_02_DEA_datasets_Introduction_to_Landsat_22_1.png" />
</div>
</div>
</div>
<div class="section" id="Creating-a-'false-colour'-image-using-three-bands">
<h3>Creating a ‘false colour’ image using three bands<a class="headerlink" href="#Creating-a-'false-colour'-image-using-three-bands" title="Permalink to this headline">¶</a></h3>
<p>This plot uses the SWIR and NIR bands to accentuate the presence of
water or vegetation in the landscape:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds</span><span class="p">[[</span><span class="s1">&#39;swir1&#39;</span><span class="p">,</span> <span class="s1">&#39;nir&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">robust</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[8]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x7feac2f39ba8&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_02_DEA_datasets_Introduction_to_Landsat_24_1.png" src="../../_images/notebooks_02_DEA_datasets_Introduction_to_Landsat_24_1.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Computing-band-indices">
<h2>Computing band indices<a class="headerlink" href="#Computing-band-indices" title="Permalink to this headline">¶</a></h2>
<p>Bands from Landsat surface reflectance products can be combined to
compute simple remote sensing indices that provide insights into
different aspects of the observed landscape. For example, we can
calculate the Normalized Difference Water Index (NDWI), which has high
values where a pixel is likely to be open water (e.g. NDWI &gt; 0, or red
colours below):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Compute NDWI using the formula (green - nir) / (green + nir). This will calculate</span>
<span class="c1"># NDWI for every time-step in the dataset:</span>
<span class="n">ds_ndwi</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">green</span> <span class="o">-</span> <span class="n">ds</span><span class="o">.</span><span class="n">nir</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">green</span> <span class="o">+</span> <span class="n">ds</span><span class="o">.</span><span class="n">nir</span><span class="p">)</span>
<span class="n">ds_ndwi</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[9]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;xarray.DataArray (time: 2, y: 500, x: 492)&gt;
array([[[-0.197048, -0.196371, ..., -0.142378, -0.133447],
        [-0.200766, -0.189204, ..., -0.145034, -0.141426],
        ...,
        [-0.195211, -0.189536, ..., -0.172486, -0.173491],
        [-0.194376, -0.192301, ..., -0.173329, -0.174322]],

       [[-0.605961, -0.581647, ..., -0.455058, -0.473235],
        [-0.587417, -0.556818, ..., -0.502787, -0.50885 ],
        ...,
        [-0.416509, -0.425257, ...,       nan,       nan],
        [-0.456825, -0.398799, ...,       nan,       nan]]])
Coordinates:
  * time     (time) datetime64[ns] 2017-01-07T23:50:29 2017-01-14T23:56:38
  * y        (y) float64 -3.953e+06 -3.953e+06 -3.953e+06 -3.953e+06 ...
  * x        (x) float64 1.542e+06 1.542e+06 1.542e+06 1.542e+06 1.542e+06 ...
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># We can now add this back into our dataset as a new data variable:</span>
<span class="n">ds</span><span class="p">[</span><span class="s2">&quot;NDWI&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds_ndwi</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[10]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;xarray.Dataset&gt;
Dimensions:          (time: 2, x: 492, y: 500)
Coordinates:
  * time             (time) datetime64[ns] 2017-01-07T23:50:29 ...
  * y                (y) float64 -3.953e+06 -3.953e+06 -3.953e+06 -3.953e+06 ...
  * x                (x) float64 1.542e+06 1.542e+06 1.542e+06 1.542e+06 ...
Data variables:
    coastal_aerosol  (time, y, x) float64 1.491e+03 1.547e+03 1.622e+03 ...
    blue             (time, y, x) float64 1.38e+03 1.394e+03 1.492e+03 ...
    green            (time, y, x) float64 1.469e+03 1.506e+03 1.515e+03 ...
    red              (time, y, x) float64 1.458e+03 1.509e+03 1.521e+03 ...
    nir              (time, y, x) float64 2.19e+03 2.242e+03 2.278e+03 ...
    swir1            (time, y, x) float64 1.294e+03 1.266e+03 1.257e+03 ...
    swir2            (time, y, x) float64 1.076e+03 1.064e+03 1.059e+03 ...
    NDWI             (time, y, x) float64 -0.197 -0.1964 -0.2012 -0.206 ...
Attributes:
    crs:      EPSG:3577
</pre></div>
</div>
</div>
<div class="section" id="Plotting-a-single-data-variable-or-band">
<h3>Plotting a single data variable or band<a class="headerlink" href="#Plotting-a-single-data-variable-or-band" title="Permalink to this headline">¶</a></h3>
<p>Newly created data variables (like <code class="docutils literal notranslate"><span class="pre">NDWI</span></code> above) can be plotted in
exactly the same way as individual Landsat bands:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># First, we select the variable we want (&#39;NDWI&#39;), and then make a</span>
<span class="c1"># plot with one column for each time-step:</span>
<span class="n">ds</span><span class="o">.</span><span class="n">NDWI</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_02_DEA_datasets_Introduction_to_Landsat_29_0.png" src="../../_images/notebooks_02_DEA_datasets_Introduction_to_Landsat_29_0.png" />
</div>
</div>
<p>There are thousands of different band indices available; for example,
the Normalized Difference Vegetation Index (NDVI) which has high values
for pixels containing vegetation:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Compute NDVI using the formula (nir - red) / (nir + red)</span>
<span class="n">ds_ndvi</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">nir</span> <span class="o">-</span> <span class="n">ds</span><span class="o">.</span><span class="n">red</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">nir</span> <span class="o">+</span> <span class="n">ds</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>

<span class="c1"># Add this back into our dataset as a new data variable:</span>
<span class="n">ds</span><span class="p">[</span><span class="s2">&quot;NDVI&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds_ndvi</span>

<span class="c1"># Plot:</span>
<span class="n">ds</span><span class="o">.</span><span class="n">NDVI</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_02_DEA_datasets_Introduction_to_Landsat_31_0.png" src="../../_images/notebooks_02_DEA_datasets_Introduction_to_Landsat_31_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Cloud-masking-with-Landsat-pixel-quality-(PQ25)">
<h2>Cloud masking with Landsat pixel quality (PQ25)<a class="headerlink" href="#Cloud-masking-with-Landsat-pixel-quality-(PQ25)" title="Permalink to this headline">¶</a></h2>
<p>You will observe above that the first timestep is affected by thick
cloud that covers the majority of the image. Understanding where unclear
pixels like these are in an image and then removing or dealing with them
is a vital part of using any earth observation dataset like NBAR or
NBAR-T surface reflectance.</p>
<p>Please refer to the
<a class="reference external" href="https://github.com/GeoscienceAustralia/dea-notebooks/blob/master/DEA_datasets/Introduction_to_LandsatPQ.ipynb">Introduction_to_LandsatPQ</a>
for information on how to clean and analyse Landsat data by accounting
for pixel quality.</p>
<div class="section" id="References">
<h3>References<a class="headerlink" href="#References" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>USGS, 2018a. <em>Landsat Project Description | Landsat Missions</em>, Page
Last Modified: 04/25/18 01:57 pm.
<a class="reference external" href="https://landsat.usgs.gov/landsat-project-description">https://landsat.usgs.gov/landsat-project-description</a></li>
<li>USGS, 2018b. <em>Landsat Missions Timeline | Landsat Missions</em>, Page
Last Modified: 04/25/18 01:57 pm
<a class="reference external" href="https://landsat.usgs.gov/landsat-missions-timeline">https://landsat.usgs.gov/landsat-missions-timeline</a></li>
<li>USGS, 2018c. <em>Landsat 5 History | Landsat Missions</em>, Page Last
Modified: 04/25/18 01:57 pm
<a class="reference external" href="https://landsat.usgs.gov/landsat-5-history">https://landsat.usgs.gov/landsat-5-history</a></li>
<li>USGS, 2018d. <em>Landsat 6 History | Landsat Missions</em>, Page Last
Modified: 04/25/18 01:57 pm
<a class="reference external" href="https://landsat.usgs.gov/landsat-6-history">https://landsat.usgs.gov/landsat-6-history</a></li>
<li>USGS, 2018e. <em>Landsat 7 | Landsat Missions</em>, Page Last Modified:
04/25/18 01:57 pm <a class="reference external" href="https://landsat.usgs.gov/landsat-7-history">https://landsat.usgs.gov/landsat-7-history</a></li>
<li>USGS, 2018f. <em>Landsat 8 | Landsat Missions</em>, Page Last Modified:
04/25/18 01:57 pm <a class="reference external" href="https://landsat.usgs.gov/landsat-8-mission">https://landsat.usgs.gov/landsat-8-mission</a></li>
<li>USGS, 2018g. <em>Landsat 9 | Landsat Missions</em>, Page Last Modified:
04/25/18 01:57 pm <a class="reference external" href="https://landsat.usgs.gov/landsat-9-mission">https://landsat.usgs.gov/landsat-9-mission</a></li>
<li>USGS, 2018h. <em>Landsat 7 Data Users Handbook - Section 2 | Landsat
Missions</em>, Page Last Modified: 04/25/18 01:57 pm
<a class="reference external" href="https://landsat.usgs.gov/landsat-7-data-users-handbook-section-2">https://landsat.usgs.gov/landsat-7-data-users-handbook-section-2</a></li>
<li>GA, 2017. <em>Surface Reflectance — Digital Earth Australia 1.0.0
documentation</em>
<a class="reference external" href="http://geoscienceaustralia.github.io/digitalearthau/data/data.html">http://geoscienceaustralia.github.io/digitalearthau/data/data.html</a></li>
</ol>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Introduction_to_LandsatPQ.html" class="btn btn-neutral float-right" title="Introduction to Landsat pixel quality (PQ25)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="README.html" class="btn btn-neutral" title="DEA Datasets" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2018, Geoscience Australia.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script type="text/javascript" src="https://unpkg.com/@jupyter-widgets/html-manager@^0.14.0/dist/embed-amd.js"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


<!-- Theme Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113800428-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 
 gtag('config', 'UA-113800428-1');
</script>

    
  


</body>
</html>
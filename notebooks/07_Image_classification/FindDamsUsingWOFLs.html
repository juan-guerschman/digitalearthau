


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Find dams using WOFLs &mdash; Digital Earth Australia 1.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/dea-favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script type="text/javascript" src="https://unpkg.com/@jupyter-widgets/html-manager@^0.14.0/dist/embed-amd.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://unpkg.com/font-awesome@4.5.0/css/font-awesome.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Random forest classification" href="RandomForestClassification.html" />
    <link rel="prev" title="Extracting contour lines" href="ExtractingContourLines.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/dea-logo-inline.svg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/changelog.html">DEA NCI Environment Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Connect</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../connect/account.html">NCI Account Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/install.html">Installation and Software Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/get_help.html">Getting help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/nci_basics.html">Command Line Usage (Advanced)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/jupyter.html">Jupyter Notebooks Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/other_modules.html">Other Modules</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_Getting_started/README.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_DEA_datasets/README.html">DEA Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_Integrating_external_data/README.html">Integrating External Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_Index_calculation/README.html">Index Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_Temporal_analysis/README.html">Temporal Analyses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_Composite_generation/README.html">Composite Generation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="README.html">Image Classification</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="DEA_WOfS_and_water_classifier.html">DEA WOfS and Water Classifier Notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="ExtractingContourLines.html">Extracting contour lines</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Find dams using WOFLs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Set-up-the-analysis">Set up the analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Select-a-cropping-season-and-test-location">Select a cropping season and test location</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Set-up-some-file-names-for-the-outputs-we-will-write">Set up some file names for the outputs we will write</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Load-the-WOFLs">Load the WOFLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Identify-the-water-bodies-in-our-study-area-during-our-chosen-time-period">Identify the water bodies in our study area during our chosen time period</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Calculate-percentage-wet-over-this-season">Calculate percentage wet over this season</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Write-out-our-percentage-wet-classification-to-.TIFF">Write out our percentage wet classification to .TIFF</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Filter-our-classified-data-layer-to-remove-noise">Filter our classified data layer to remove noise</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#First,-filter-the-raster-based-on-values-&gt;0.05">First, filter the raster based on values &gt;0.05</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Convert-the-raster-to-polygons">Convert the raster to polygons</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Filter-the-wet-polygons-to-find-'dams'">Filter the wet polygons to find ‘dams’</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Remove-the-giant-zero-polygon">Remove the giant zero polygon</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Calculate-the-area-of-each-polygon">Calculate the area of each polygon</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Filter-out-any-polygons-smaller-than-5000-m2">Filter out any polygons smaller than 5000 m2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Remove-any-polygons-that-intersect-with-a-major-river">Remove any polygons that intersect with a major river</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Plot-the-final-set-of-dam-polygons">Plot the final set of dam polygons</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Save-the-polygons-to-a-shapefile">Save the polygons to a shapefile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="RandomForestClassification.html">Random forest classification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../08_Outputting_data/README.html">Outputting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_Workflows/README.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_Scripts/README.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Supplementary_data/README.html">Supplementary Data</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data/data.html">Surface Reflectance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/s3.html">Products Available on Amazon S3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/s3-sftp.html">Bulk download products from Amazon S3</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../internal/new_product.html">Creating a New Product</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/git_best_practice.html">Git Best Practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/release.html">DEA Release Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/modules.html">DEA Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/collection_management.html">Collection Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/requirements_met.html">DEA Code Functionality Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Indexes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Tags Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Digital Earth Australia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="README.html">Image Classification</a> &raquo;</li>
        
      <li>Find dams using WOFLs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/notebooks/07_Image_classification/FindDamsUsingWOFLs.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Find-dams-using-WOFLs">
<h1>Find dams using WOFLs<a class="headerlink" href="#Find-dams-using-WOFLs" title="Permalink to this headline">¶</a></h1>
<p><strong>What does this notebook do?</strong> This notebook uses <code class="docutils literal notranslate"><span class="pre">wofs_albers</span></code> tiles (aka <code class="docutils literal notranslate"><span class="pre">WOFLs</span></code>) to identify water bodies in the landscape. This code follows the following workflow: * Select a time period and location for the analysis * Extract all available WOFLs for that time and location * Calculate the percentage of time each pixel is observed as wet * Keep only pixels identified as wet at least 5% of the time * Convert the raster data into polygons * Filter the polygons based on size and
proximity to identified major rivers * Write out the final polygon set as a shapefile</p>
<p><strong>Requirements:</strong> You need to run the following commands from the command line prior to launching jupyter notebooks from the same terminal so that the required libraries and paths are set:</p>
<p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">use</span> <span class="pre">/g/data/v10/public/modules/modulefiles</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">dea</span></code></p>
<p>This example also uses a number of functions available within the <code class="docutils literal notranslate"><span class="pre">10_Scripts</span></code> folder of the <a class="reference external" href="https://github.com/GeoscienceAustralia/dea-notebooks/tree/master/10_Scripts">dea-notebooks Github repository</a>. Note that these functions have been developed by DEA users, not the DEA development team, and so are provided without warranty. If you find an error or bug in the functions, please either create an ‘Issue’ in the Github repository, or fix it yourself and create a ‘Pull’ request to
contribute the updated function back into the repository (See the repository <a class="reference external" href="https://github.com/GeoscienceAustralia/dea-notebooks/blob/master/README.rst">README</a> for instructions on creating a Pull request).</p>
<p><strong>Date:</strong> August 2018</p>
<p><strong>Author:</strong> Claire Krause</p>
<p>Tags: <span class="target" id="index-0"></span>fiona, <span class="target" id="index-1"></span>geopandas, <span class="target" id="index-2"></span>Geotiff, <span class="target" id="index-3"></span>masking, <span class="target" id="index-4"></span>rasterio, <span class="target" id="index-5"></span>shapefile, <span class="target" id="index-6"></span>WOfS, <span class="target" id="index-7"></span>WOFL, <span class="target" id="index-8"></span>write_geotiff, <span class="target" id="index-9"></span>shapely, <span class="target" id="index-10"></span>descartes, <span class="target" id="index-11"></span>water_classifier_and_wofs, <span class="target" id="index-12"></span>raster to polygons, <span class="target" id="index-13"></span>polygons</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># %pylab notebook</span>

<span class="kn">from</span> <span class="nn">datacube</span> <span class="k">import</span> <span class="n">Datacube</span>
<span class="kn">from</span> <span class="nn">datacube.storage</span> <span class="k">import</span> <span class="n">masking</span>
<span class="kn">import</span> <span class="nn">rasterio.features</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="k">import</span> <span class="n">Polygon</span><span class="p">,</span> <span class="n">shape</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gp</span>
<span class="kn">from</span> <span class="nn">descartes</span> <span class="k">import</span> <span class="n">PolygonPatch</span>
<span class="kn">import</span> <span class="nn">fiona</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">fiona.crs</span> <span class="k">import</span> <span class="n">from_epsg</span>
<span class="kn">from</span> <span class="nn">datacube.helpers</span> <span class="k">import</span> <span class="n">write_geotiff</span>

<span class="c1"># Import the custom scripts. These can be found in the dea-notebooks repository.</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;../10_Scripts&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">water_classifier_and_wofs</span>

<span class="n">dc</span> <span class="o">=</span> <span class="n">Datacube</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="s1">&#39;pixel_drill&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Set-up-the-analysis">
<h2>Set up the analysis<a class="headerlink" href="#Set-up-the-analysis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Select-a-cropping-season-and-test-location">
<h3>Select a cropping season and test location<a class="headerlink" href="#Select-a-cropping-season-and-test-location" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">30.310464</span><span class="p">,</span> <span class="o">-</span><span class="mf">30.748712</span><span class="p">),</span>
         <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">149.681035</span><span class="p">,</span> <span class="mf">150.169855</span><span class="p">),</span>
         <span class="s1">&#39;time&#39;</span><span class="p">:(</span><span class="s1">&#39;2016-10-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-05-01&#39;</span><span class="p">)</span>
         <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Set-up-some-file-names-for-the-outputs-we-will-write">
<h3>Set up some file names for the outputs we will write<a class="headerlink" href="#Set-up-some-file-names-for-the-outputs-we-will-write" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># The name and filepath of the intermediate GeoTIFF file</span>
<span class="n">WOFS_TIFF</span> <span class="o">=</span> <span class="s1">&#39;wofs.tif&#39;</span>

<span class="c1"># The name and filepath of the final output polygon set</span>
<span class="n">WOFSshp</span> <span class="o">=</span> <span class="s1">&#39;wofs.shp&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Load-the-WOFLs">
<h2>Load the WOFLs<a class="headerlink" href="#Load-the-WOFLs" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%%time</span>
<span class="n">WOFL</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">product</span><span class="o">=</span><span class="s1">&#39;wofs_albers&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">query</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CPU times: user 7.99 s, sys: 1.01 s, total: 9 s
Wall time: 22.9 s
</pre></div></div>
</div>
</div>
<div class="section" id="Identify-the-water-bodies-in-our-study-area-during-our-chosen-time-period">
<h2>Identify the water bodies in our study area during our chosen time period<a class="headerlink" href="#Identify-the-water-bodies-in-our-study-area-during-our-chosen-time-period" title="Permalink to this headline">¶</a></h2>
<p>We are only interested in the water classifier, so we will create a boolean mask for wet vs not wet. This way we can easily find dams from always dry ground.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">wetWOFL</span> <span class="o">=</span> <span class="n">masking</span><span class="o">.</span><span class="n">make_mask</span><span class="p">(</span><span class="n">WOFL</span><span class="p">,</span> <span class="n">wet</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">dryWOFL</span> <span class="o">=</span> <span class="n">masking</span><span class="o">.</span><span class="n">make_mask</span><span class="p">(</span><span class="n">WOFL</span><span class="p">,</span> <span class="n">dry</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Calculate-percentage-wet-over-this-season">
<h3>Calculate percentage wet over this season<a class="headerlink" href="#Calculate-percentage-wet-over-this-season" title="Permalink to this headline">¶</a></h3>
<p>We want to work out how often a pixel is wet, as a proportion of the total time the pixel was observed.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">total_water_obs</span> <span class="o">=</span> <span class="n">wetWOFL</span><span class="o">.</span><span class="n">water</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="n">total_dry_obs</span> <span class="o">=</span> <span class="n">dryWOFL</span><span class="o">.</span><span class="n">water</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>

<span class="n">wofs</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_water_obs</span> <span class="o">/</span> <span class="p">(</span><span class="n">total_water_obs</span> <span class="o">+</span> <span class="n">total_dry_obs</span><span class="p">))</span>
<span class="n">wofs</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.collections.QuadMesh at 0x7ff94c6344e0&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_07_Image_classification_FindDamsUsingWOFLs_12_1.png" src="../../_images/notebooks_07_Image_classification_FindDamsUsingWOFLs_12_1.png" />
</div>
</div>
</div>
<div class="section" id="Write-out-our-percentage-wet-classification-to-.TIFF">
<h3>Write out our percentage wet classification to .TIFF<a class="headerlink" href="#Write-out-our-percentage-wet-classification-to-.TIFF" title="Permalink to this headline">¶</a></h3>
<p>(So we can refer to it later on if required)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">wofsds</span> <span class="o">=</span> <span class="n">wofs</span><span class="o">.</span><span class="n">to_dataset</span><span class="p">()</span>
<span class="n">wofsds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;affine&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">WOFL</span><span class="o">.</span><span class="n">affine</span>
<span class="n">wofsds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;crs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">WOFL</span><span class="o">.</span><span class="n">crs</span>
<span class="n">write_geotiff</span><span class="p">(</span><span class="n">WOFS_TIFF</span><span class="p">,</span> <span class="n">wofsds</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Filter-our-classified-data-layer-to-remove-noise">
<h2>Filter our classified data layer to remove noise<a class="headerlink" href="#Filter-our-classified-data-layer-to-remove-noise" title="Permalink to this headline">¶</a></h2>
<div class="section" id="First,-filter-the-raster-based-on-values-&gt;0.05">
<h3>First, filter the raster based on values &gt;0.05<a class="headerlink" href="#First,-filter-the-raster-based-on-values->0.05" title="Permalink to this headline">¶</a></h3>
<p>I.e. where water is observed at least 5% of the time (to remove e.g. ponds of water after rain events). This removes much of the noise from our dataset. We also convert our classifier into a boolean dataset here, to remove the seasonal percentage values for each pixel and just keep the ‘yes’/’no’ ‘could it be a dam’ information.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">WOFSfiltered</span> <span class="o">=</span> <span class="n">wofs</span> <span class="o">&gt;</span> <span class="mf">0.05</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">WOFSfiltered</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.collections.QuadMesh at 0x7ff94c5ab3c8&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_07_Image_classification_FindDamsUsingWOFLs_17_1.png" src="../../_images/notebooks_07_Image_classification_FindDamsUsingWOFLs_17_1.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Convert-the-raster-to-polygons">
<h2>Convert the raster to polygons<a class="headerlink" href="#Convert-the-raster-to-polygons" title="Permalink to this headline">¶</a></h2>
<p>At this point, we want to move from a gridded dataset to polygons, so we can treat the clusers of wet pixels as a whole.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">WOFSpolygons</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">features</span><span class="o">.</span><span class="n">shapes</span><span class="p">(</span><span class="n">WOFSfiltered</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">),</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">WOFL</span><span class="o">.</span><span class="n">affine</span><span class="p">)</span>
<span class="n">WOFSlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">WOFSpolygons</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Filter-the-wet-polygons-to-find-'dams'">
<h2>Filter the wet polygons to find ‘dams’<a class="headerlink" href="#Filter-the-wet-polygons-to-find-'dams'" title="Permalink to this headline">¶</a></h2>
<p>Note that these are ‘dams’ because we can not definitively say whether the water bodies identified are farm storages, lakes, rivers, or any other type of persistent water body.</p>
<p>We can filter our identified water bodies to get us closer to dams though…</p>
<div class="section" id="Remove-the-giant-zero-polygon">
<h3>Remove the giant zero polygon<a class="headerlink" href="#Remove-the-giant-zero-polygon" title="Permalink to this headline">¶</a></h3>
<p>When we convert our data into polygons, the area surrounding the water features we want to capture is also converted to a polygon. We need to filter out any polygon that was created from the areas not identified as wet.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">RemoveZero</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">WOFSlist</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">RemoveZeroWOFS</span> <span class="o">=</span> <span class="p">[</span><span class="n">WOFSlist</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">RemoveZero</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Calculate-the-area-of-each-polygon">
<h3>Calculate the area of each polygon<a class="headerlink" href="#Calculate-the-area-of-each-polygon" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">WOFLshapes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">WOFLshape</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">RemoveZeroWOFS</span><span class="p">):</span>
    <span class="n">polyArea</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">WOFLshape</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;coordinates&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">area</span>
    <span class="n">WOFLshape</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;properties&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;area&#39;</span><span class="p">:</span> <span class="n">polyArea</span><span class="p">}</span>
    <span class="n">WOFLshapes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">WOFLshape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Filter-out-any-polygons-smaller-than-5000-m2">
<h3>Filter out any polygons smaller than 5000 m2<a class="headerlink" href="#Filter-out-any-polygons-smaller-than-5000-m2" title="Permalink to this headline">¶</a></h3>
<p>This value can be changed, however we have set it at 5000 m2 to focus only on large water bodies for now.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">AreasIndex</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">WOFLshapes</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;properties&#39;</span><span class="p">][</span><span class="s1">&#39;area&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">5050</span><span class="p">]</span>
<span class="n">WOFSOFSbig</span> <span class="o">=</span> <span class="p">[</span><span class="n">WOFLshapes</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">AreasIndex</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Remove-any-polygons-that-intersect-with-a-major-river">
<h3>Remove any polygons that intersect with a major river<a class="headerlink" href="#Remove-any-polygons-that-intersect-with-a-major-river" title="Permalink to this headline">¶</a></h3>
<p>We are only interested in farm dams, so do not need the WOFS polygons for the rivers. We use the <a class="reference external" href="http://pid.geoscience.gov.au/dataset/ga/83107">surface hydrology lines dataset</a> to filter out polygons that intersect with major rivers. Note that we have filtered this dataset to only keep rivers tagged as <code class="docutils literal notranslate"><span class="pre">major</span></code>, and it is this filtered dataset that we use here.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">MajorRivers</span> <span class="o">=</span> <span class="n">gp</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;/g/data/r78/cek156/ShapeFiles/SurfaceHydrologyLinesRegionalFilteredMAJOR.shp&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">WOFSOFSbreaktuple</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">WOFSOFSbig</span><span class="p">)]</span>

<span class="c1"># Grab the geometeries</span>
<span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">WOFSOFSbreaktuple</span><span class="p">:</span>
    <span class="n">poly</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shape</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>

<span class="n">WOFSOFSfiltered2p0</span> <span class="o">=</span> <span class="n">gp</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">WOFSOFSbreaktuple</span><span class="p">)</span><span class="o">.</span><span class="n">set_geometry</span><span class="p">(</span><span class="s1">&#39;geometry&#39;</span><span class="p">)</span>
<span class="n">Intersections</span><span class="o">=</span> <span class="n">gp</span><span class="o">.</span><span class="n">sjoin</span><span class="p">(</span><span class="n">MajorRivers</span><span class="p">,</span> <span class="n">WOFSOFSfiltered2p0</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="s1">&#39;intersects&#39;</span><span class="p">)</span>
<span class="n">IntersectIndex</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">Intersections</span><span class="p">[</span><span class="s1">&#39;index_right&#39;</span><span class="p">])))</span>

<span class="n">WOFSOFS</span> <span class="o">=</span> <span class="p">[</span><span class="n">WOFSOFSbreaktuple</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">WOFSOFSbreaktuple</span><span class="p">))</span>
                                  <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">IntersectIndex</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/g/data/v10/public/modules/dea-env/20180405/lib/python3.6/site-packages/geopandas/tools/sjoin.py:53: UserWarning: CRS of frames being joined does not match!
  warn(&#39;CRS of frames being joined does not match!&#39;)
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="Plot-the-final-set-of-dam-polygons">
<h2>Plot the final set of dam polygons<a class="headerlink" href="#Plot-the-final-set-of-dam-polygons" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">WOFSOFS</span><span class="p">)):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">PolygonPatch</span><span class="p">(</span><span class="n">WOFSOFS</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">facecolor</span> <span class="o">=</span> <span class="kc">None</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;scaled&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_07_Image_classification_FindDamsUsingWOFLs_31_0.png" src="../../_images/notebooks_07_Image_classification_FindDamsUsingWOFLs_31_0.png" />
</div>
</div>
</div>
<div class="section" id="Save-the-polygons-to-a-shapefile">
<h2>Save the polygons to a shapefile<a class="headerlink" href="#Save-the-polygons-to-a-shapefile" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="s1">&#39;Polygon&#39;</span><span class="p">,</span><span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;area&#39;</span><span class="p">:</span> <span class="s1">&#39;str&#39;</span><span class="p">}}</span>

<span class="k">with</span> <span class="n">fiona</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">WOFSshp</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">crs</span> <span class="o">=</span> <span class="n">from_epsg</span><span class="p">(</span><span class="mi">3577</span><span class="p">),</span> <span class="n">driver</span> <span class="o">=</span> <span class="s1">&#39;ESRI Shapefile&#39;</span><span class="p">,</span> <span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span><span class="p">)</span> <span class="k">as</span> <span class="n">output</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">WOFSOFS</span><span class="p">)):</span>
        <span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;area&#39;</span><span class="p">:</span> <span class="n">WOFSOFS</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;properties&#39;</span><span class="p">][</span><span class="s1">&#39;area&#39;</span><span class="p">]},</span>
                    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">WOFSOFS</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">],</span> <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="n">WOFSOFS</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;coordinates&#39;</span><span class="p">]}})</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="RandomForestClassification.html" class="btn btn-neutral float-right" title="Random forest classification" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ExtractingContourLines.html" class="btn btn-neutral float-left" title="Extracting contour lines" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2018, Geoscience Australia

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-113800428-1', 'auto');
    ga('send', 'pageview');
    </script>

    
  


<!-- Theme Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113800428-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 
 gtag('config', 'UA-113800428-1');
</script>

    
  


</body>
</html>